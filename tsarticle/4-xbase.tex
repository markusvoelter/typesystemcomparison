\section{Xbase}
To to leverage type checking and scoping of Xbase in this scenario, the \emph{Expression} rule in the grammar is replaced with the Xbase \emph{XExpression} and \emph{JvmTypes} are inferred for \emph{Entities} and \emph{Forms}.

The validator in the Xbase scenario is shown in listing \ref{lst:xbase-jvm-inferrer}. The validation methods (e.g. the one for a \emph{TextWidget}) look similar to the plain Xtext scenario, with the difference that now \emph{JvmTypes} are compared, which are supplied by a type provider which delegates to the built-in Xbase type provider.

\lstinputlisting[label=lst:xbase-validator,caption=Xtext validator in the Xbase scenario.]	{code/XGuiDslJavaValidatorx.xtend}

\subsection{Java Type Inference}
The specification of how to infer Java types from the DSL is shown in the \emph{JvmModelInferrer} in listing \ref{lst:xbase-jvm-inferrer}.  For each entity, a Java class is inferred with fields, getters and setters. If an expression for an attribute is given, it is interpreted as a derived attribute, so only a getter method is inferred.

Two Xtend syntax shortcuts are used in this class: The extension syntax with the dot after the first argument of an operation (\verb|attribute.toField(...)| instead of \verb|toField(attribute, ...)|, and the closure (\verb|[...]|)after the parenthesis, if it is the last argument of an operation (\lstinline[basicstyle=\ttfamily]{toMethod(...) [...]} instead of \lstinline[basicstyle=\ttfamily]{toMethod(..., [...])}.

To get scoping and type checking of the \emph{validate} clause inside a \emph{Form} from Xbase, a method with return type \emph{boolean} is inferred for each validate clause. The method's name is derived from the attribute's name the widget refers to. The case study requires that the keyword \verb|widgetcontent| in the \emph{validate} clause must refer to the attribute the widget refers to. This is done in Xbase by adding a parameter with the same name of the attribute's type. Though not required in the case study, the entity's attributes are also on the scope by adding a parameter of the entity's type. The parameter name \emph{it} has a special meaning in Xtend - it may be omitted in an expression, so that in a \emph{validate} clause, one could either write \lstinline[basicstyle=\ttfamily]{it.name.length > 2} or \verb|name.length > 2|.

\lstinputlisting[label=lst:xbase-jvm-inferrer,caption=JvmModelInferrer written in Xtend.]	{code/XGuiDslJvmModelInferrer.xtend}

\subsection{Summary}
The Xbase approach uses the \emph{JvmModelInferrer} to infer and generate Java classes with appropriate operations for entities and forms, in order to make use of Xbase for scoping and validation (e.g. for the \emph{validate} clause of a widget). Types are inferred using the Xbase type provider, for example in the validator.
