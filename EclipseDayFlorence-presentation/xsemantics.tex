\section[Xsemantics]{Implementation in XSemantics}

\begin{frame}
\frametitle{XSemantics}
\tableofcontents[currentsection]

\end{frame}

\begin{frame}
\frametitle{Xsemantics}

\begin{itemize}
  \item  a DSL for writing 
  \begin{itemize}
    \item type systems (static semantics)
    \item reduction rules (dynamic semantics)
    \item interpreters
    \item general relation rules
  \end{itemize}
  for languages implemented in Xtext
  \item A system definition is a set of judgment rules which have a
conclusion and a set of premises (relying on Xbase for the syntax)
  \item thought to be used by people who are familiar
with formal type systems and operational semantics
  \item aims at providing
a syntax which is close to the way deduction rules are written in a formal
setting
\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Define your judgments}

\begin{footnotesize}
\input{listings/Judgments.xsemantics}
\end{footnotesize}

\end{frame}


\begin{frame}
\frametitle{Similarities}

\begin{center}
\begin{tabular}{c@{\hspace{1cm}}c}
\inferrule
{}
{\g \f \mykeyb{true} : \mykeyb{boolean} }
&
\inferrule
{\g \f \mytt{attr} : \T}
{\g \f \mykeyb{ref} \ \mytt{attr} : \T }
\end{tabular}
\end{center}

\onslide<2->

\begin{footnotesize}
\input{listings/SimpleRules.xsemantics}
\end{footnotesize}

\end{frame}

\begin{frame}
\frametitle{Similarities}

\begin{center}
\begin{tabular}{c@{\hspace{.5cm}}c@{\hspace{.5cm}}c}
\inferrule
{\g \f \mytt{exp} : \mykeyb{string}}
{\g \f \mykeyb{lengthOf}(\mytt{exp}) : \mykeyb{int} }
&
\inferrule
{\g \f \g(\mykeyb{widgetcontent}) : \T}
{\g \f \mykeyb{widgetcontent} : \T }
\end{tabular}
\end{center}

\onslide<2->

\begin{footnotesize}
\input{listings/SimpleRules2.xsemantics}
\end{footnotesize}

\end{frame}

\begin{frame}[allowframebreaks,fragile]
\frametitle{Similarities}

\begin{verbatim}
rule PlusType
	G |- Plus plus : Type type
from {
	// deal with any type
	G |- plus.left : var Type leftType
	G |- plus.right : var Type rightType
	// get the most general (which can also be string)
	G |- leftType ~~ rightType |> type
}

judgments {
   isAssignable |- Type left <~ Type right
	  error stringRep(right) + " is not assignable to " + stringRep(left)
   ...
}

rule IsAssignableBase
	G |- Type left <~ Type right
from {
	left.eClass.isSuperTypeOf(right.eClass)
}

axiom IntAssignableToString
	G |- StringType left <~ NumberType right

\end{verbatim}

\note{transitive hull implemented, but not shown here}
\end{frame}