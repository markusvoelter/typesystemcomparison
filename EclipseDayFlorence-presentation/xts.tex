\section[XTS]{Implementation in XTS}

\begin{frame}
  \frametitle{Xtext Typesystem (XTS)}
  \tableofcontents[currentsection]
\end{frame}

\begin{frame}
  \frametitle{Xtext Typesystem (XTS)}
  \begin{itemize}
  \item A Java framework to declaratively specify type system rules 
  \item DSL to generate the Java code
   \item If no suitable declarative abstraction is available, 
   Java code can be added manually.
   \item \texttt{ITypesystem} interface with methods for
   \begin{itemize}
	\item calculating the type of model elements
	\item for comparing types for
	compatibility and subtyping relationships
   \end{itemize}
\end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Setting up}


  \begin{footnotesize}
    \input{listings/xts-settingup.ts.tex}
  \end{footnotesize}


the platform URI for the Ecore file (the metaclasses for
which we want to specify the type system rules)

\end{frame}

\begin{frame}[fragile]
  \frametitle{Specifying types}

  \begin{footnotesize}
    \input{listings/xts-types.ts.tex}
  \end{footnotesize}

\onslide<2->

  \begin{footnotesize}
    \input{listings/xts-literals.ts.tex}
  \end{footnotesize}

\onslide<3->

\medskip

	Recursive computation

  \begin{footnotesize}
    \input{listings/xts-attributeref.ts.tex}
  \end{footnotesize}


\end{frame}

\begin{frame}[fragile]
  \frametitle{Specifying types}

  \begin{footnotesize}
    \input{listings/xts-characteristics.ts.tex}
  \end{footnotesize}

\onslide<2->

  \begin{footnotesize}
    \input{listings/xts-types2.ts.tex}
  \end{footnotesize}

\end{frame}

\begin{frame}[fragile]
  \frametitle{Specifying types}

  \begin{footnotesize}
    \input{listings/xts-types3.ts.tex}
  \end{footnotesize}

\end{frame}

% \begin{frame}[fragile]
%   \frametitle{The Plus Operator with XTS}
% 
% 
%   \begin{footnotesize}
%     \input{listings/xts-plus.ts.tex}
%   \end{footnotesize}
% 
%   \note{
%   \begin{itemize}
%     \item Commonly used language elements 
%   \end{itemize}
%   \begin{itemize}
%     \item subtype relationships
%     \item grouping of types
%     \item type computation, \emph{ensure}\ldots clauses 
%   \end{itemize}}
% \end{frame}
% 
% \note{
% \begin{frame}[fragile]
%   \frametitle{The Plus Operator with XTS}
%   \begin{itemize}
%     \item Coercion of a number to a String
%   \end{itemize}
% 
%   \begin{footnotesize}
%     \input{listings/xts-typecoerce.java.tex}
%   \end{footnotesize}
% 
%   \begin{itemize}
%     \item XTS will try custom coercion methods before throwing a type error
%     \item coercion methods use polymorphic dispatch 
%   \end{itemize}
%   public EObject typeCoerce( EObject candidateElement, FloatType candidate, 
% 		StringType expected, TypeCalculationTrace trace ) {
% 	if ( candidateElement instanceof NumberLiteral ) {
% 			trace.add( candidateElement, "Number coerced to string.");
% 			return create(lang.getStringType());
% 	}
% 	return null;
% }
% \end{frame}}