\section[XTS]{Implementation in XTS}

\begin{frame}
  \frametitle{Xtext Typesystem (XTS)}
  \tableofcontents[currentsection]
\end{frame}

\begin{frame}
  \frametitle{Xtext Typesystem (XTS)}
  \begin{itemize}
  \item Typesystem DSL written in Xtext
  \item Additional uses: interpreter, testing
  \item Recursive type computation
\end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{The Plus Operator with XTS}


  \begin{footnotesize}
    \input{listings/xts-plus.ts.tex}
  \end{footnotesize}

  \note{
  \begin{itemize}
    \item Commonly used language elements 
  \end{itemize}
  \begin{itemize}
    \item subtype relationships
    \item grouping of types
    \item type computation, \emph{ensure}\ldots clauses 
  \end{itemize}}
\end{frame}

\note{
\begin{frame}[fragile]
  \frametitle{The Plus Operator with XTS}
  \begin{itemize}
    \item Coercion of a number to a String
  \end{itemize}

  \begin{footnotesize}
    \input{listings/xts-typecoerce.java.tex}
  \end{footnotesize}

  \begin{itemize}
    \item XTS will try custom coercion methods before throwing a type error
    \item coercion methods use polymorphic dispatch 
  \end{itemize}
  public EObject typeCoerce( EObject candidateElement, FloatType candidate, 
		StringType expected, TypeCalculationTrace trace ) {
	if ( candidateElement instanceof NumberLiteral ) {
			trace.add( candidateElement, "Number coerced to string.");
			return create(lang.getStringType());
	}
	return null;
}
\end{frame}}